<!-- Footer Type-2 -->
<footer class="">
  <div class="container">
    <div class="row">
      <div class="col-lg-3 col-md-6">
        <h3 data-target="#collapse_1">Tienda Online</h3>
        <div class="collapse dont-collapse-sm links" id="collapse_1">
          <ul>
            <li><a href="vinos.php">Vinos</a></li>
            <li><a href="espumantes.php">Espumantes</a></li>
            <li><a href="licores_destilados.php">Licores y Destilados</a></li>
          </ul>
        </div>
        <h3 data-target="#collapse_1">Servicio al Cliente</h3>
        <div class="collapse dont-collapse-sm links" id="collapse_1">
          <ul>
            <li><img src="img/phone.svg" alt="telefono" width="20px"><a href="tel:+56225841800"
                style="padding-left: 8px;">+562 25841800</a></li>
            <li><img src="img/email.svg" alt="email" width="20px"><a href="mailito:eventos@cavasreunidas.cl"
                style="padding-left: 8px;">eventos@cavasreunidas.cl</a></li>
            <li><img src="img/gps.svg" alt="email" width="20px"><a
                href="https://www.google.com/maps/place/Jorge+Alessandri+514,+La+Reina,+Regi%C3%B3n+Metropolitana/data=!4m2!3m1!1s0x9662ce1402906cab:0xff95dabdfa98399?sa=X&ved=2ahUKEwjtqLS2jdfpAhWfIrkGHY5XDa8Q8gEwAHoECAsQAQ"
                target="_blank" style="padding-left: 8px;">Jorge Alessandri 514, La Reina</a>
            </li>
            <h3 class="mt-5">Horario Atención</h3>
            <p class="text-center">Lunes a Viernes <br>
              9:00 a 18:00 hrs</p>
          </ul>
        </div>
      </div>
      <div class="col-lg-3 col-md-6">
        <h3 data-target="#collapse_2">Legales</h3>
        <div class="collapse dont-collapse-sm links" id="collapse_2">
          <ul>
            <li><a href="terminos_condiciones.php">Terminos y Condiciones</a></li>
            <li><a href="privacidad.php">Privacidad</a></li>
          </ul>
        </div>
        <h3 data-target="#collapse_2">Sitio Seguro</h3>
        <div class="collapse dont-collapse-sm links" id="collapse_2">
          <ul>
            <li><img src="img/webpay-logo.png" alt="webpay-logo" width="80%"></li>
            <li><img src="img/certificado-ssl.png" alt="certificado-ssl" width="80%"></li>

          </ul>
        </div>
      </div>
      <div class="col-lg-6 col-md-6">
        <h3 data-target="#collapse_4">Suscribete a nuestro Newsletter</h3>
        <div class="collapse dont-collapse-sm" id="collapse_4">
          <div id="newsletter">
            <div class="form-group">
              <input type="email" name="EmailNewsletter" id="EmailNewsletter" class="form-control"
                placeholder="Tu email">
              <button class="" type="submit" id="submit-newsletter" onClick="javascript: newsletter();">
                <i class="ti-angle-double-right"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="redes">
          <h3>Redes Sociales</h3>
          <div class="iconos">
            <ul>
              <li><a href="http://twitter.com/cavasonline1" style="padding-left: 8px;"><img src="img/twitter.svg"
                    alt="twitter"></li></a>
              <li><a href="https://www.facebook.com/CAVAS-online-113298540374033" style="padding-left: 8px;"><img
                    src="img/facebook.svg" alt="facebook"></li>
              </a>
              <li><a href="https://www.instagram.com/cavasonline" style="padding-left: 8px;"><img
                    src="img/instagram.svg" alt="instagram"></li></a>
            </ul>

          </div>
        </div>
      </div>
    </div>
    <!-- /row-->
    <hr>
    <div class="row add_bottom_25">
      <div class="col-lg-6">
        <ul class="footer-selector clearfix">

          <!-- <li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="img/cards_all.svg" alt="" width="198" height="30" class="lazy"></li> -->
        </ul>
      </div>
      <div class="col-lg-12">
        <ul class="additional_links">
          <li>Cavas Reunidas S.A - RUT 96.856.980-5</li>
          <li><a href="terminos_condiciones.php">Terminos y Condiciones</a></li>
          <li><a href="privacidad.php">Privacidad</a></li>
          <li><span>© 2020 Cavas Online</span></li>
        </ul>
      </div>
    </div>
  </div>
</footer>
<!-- end footer -->

<!--<div id="back-to-top">
  <a href="#top"><i class="fa fa-angle-up"></i></a>
</div> -->
</div> <!-- end content wrapper -->
</div> <!-- end main wrapper -->

<!-- Footer Inicio Sesión  -->
<!-- <div class="modal fade" id="login-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
     style="display: none;">
     <div class="modal-dialog">
          <div id="divLogin" class="loginmodal-container">
          </div>
     </div>
</div>-->



<!-- Footer Inicio Sesión  End -->
<!-- jQuery Scripts -->
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/bootstrap-select.js"></script>
<script type="text/javascript" src="js/plugins.js"></script>
<script type="text/javascript" src="js/sweetalert.min.js"></script>
<script type="text/javascript" src="js/scripts.js"></script>
<script type="text/javascript" src="js/common_scripts.min.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" src="jPages/js/js.js"></script>
<script type="text/javascript" src="jPages/js/jPages.js"></script>
<script type="text/javascript" src="js/jquery.Rut.js"></script>

<script>
$(document).ready(function() {
  $(".mostrar").click(function() {
    $(".buscador-m").toggle();
  });
});
</script>

<!-- SPECIFIC SCRIPTS -->
<script src="js/carousel-home.js"></script>
<script>
$('#btnLogin').click(function(e) {
  e.preventDefault();
  $('#login-modal').modal('hide'); //$('#login-modal').modal('toggle');
  return false;
});
</script>


<script type="text/javascript" src="js/jqueryui/jquery.blockUI.js"></script>



<!--<script type="text/javascript" src="js/tabs.js"></script>-->

<!-- Animated Icons -->
<!--
<script type="text/javascript">
new Vivus('svg-icon-1', {duration: 200});
new Vivus('svg-icon-2', {duration: 200});
new Vivus('svg-icon-3', {duration: 200});
new Vivus('svg-icon-4', {duration: 200});
new Vivus('svg-icon-5', {duration: 200});
new Vivus('svg-icon-6', {duration: 200});
</script>
-->



<script>
function number_format(amount, decimals) {
  amount += ''; // por si pasan un numero en vez de un string
  amount = parseFloat(amount.replace(/[^0-9\.]/g, '')); // elimino cualquier cosa que no sea numero o punto

  decimals = decimals || 0; // por si la variable no fue fue pasada

  // si no es un numero o es igual a cero retorno el mismo cero
  if (isNaN(amount) || amount === 0)
    return parseFloat(0).toFixed(decimals);

  // si es mayor o menor que cero retorno el valor formateado como numero
  amount = '' + amount.toFixed(decimals);

  var amount_parts = amount.split('.'),
    regexp = /(\d+)(\d{3})/;

  while (regexp.test(amount_parts[0]))
    amount_parts[0] = amount_parts[0].replace(regexp, '$1' + '.' + '$2');

  return amount_parts.join('.');
}

function validarEmail(email) {
  var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
  return regex.test(email);
}

function newsletter() {

  var EmailNewsletter = $("#EmailNewsletter").val();

  error = 0;

  if (EmailNewsletter == "" || !validarEmail(EmailNewsletter)) {
    swal({
      html: true,
      text: '¡Se tiene que seleccionar un Email válido',
      icon: "warning",
      timer: 2000,
      showConfirmButton: false,
      buttons: false
    });
    $("#EmailNewsletter").focus();
    error = 1;
  }

  if (error == 0) {

    $.ajax({
      type: "POST",
      url: "newsletter.php",
      data: {
        EmailNewsletter: EmailNewsletter
      },
      dataType: "json",
      success: function(result) {
        swal({
          html: true,
          text: '¡Gracias por suscribirse!',
          icon: "success",
          timer: 2000,
          showConfirmButton: false,
          buttons: false
        });
      }

    });

  }

}




function okFiltraProducto2(e) {
  tecla = (document.all) ? e.keyCode : e.which;
  if (tecla == 13) {
    filtraProducto2();
  }
}

function filtraProducto2() {

  var bBuscador_movil = $("#bBuscador_movil").val();
  bBuscador_movil = $.trim(bBuscador_movil);

  if (bBuscador_movil != "") {

    top.location.href = 'https://www.cavasonline.cl/tienda/tienda_online.php?filtro_busqueda=' + bBuscador_movil;

  }

}



function buscaProducto() {

  var bBuscador = $("#bBuscador").val();
  bBuscador = $.trim(bBuscador);

  $.ajax({
    type: "POST",
    url: "busca_producto.php",
    data: {
      bBuscador: bBuscador
    },
    success: function(result) {
      $("#divProductosBuscador").html(result);
    }
  });

}

function okFiltraProducto(e) {
  tecla = (document.all) ? e.keyCode : e.which;
  if (tecla == 13) {
    filtraProducto();
  }
}

function filtraProducto() {

  var bBuscador = $("#bBuscador").val();
  bBuscador = $.trim(bBuscador);

  if (bBuscador != "") {

    top.location.href = 'https://www.cavasonline.cl/tienda/tienda_online.php?filtro_busqueda=' + bBuscador;

  }

}

function limpiaBusqueda() {
  $("#bBuscador").val("");
}

function menuCart() {

  $.ajax({
    type: "POST",
    url: "detalle_carro.php",
    data: "",
    success: function(result) {
      $("#divCartMenu").html(result);
    }
  });

}

function agregaCarro(CodArticulo, NombreArticulo, PrecioVenta, PrecioSugerido, PrecioSocio, Impuesto, AfectoFlete,
  RutaImagen, Destacado) {

  var Qty = $("#qty_" + CodArticulo + "").val();

  $.ajax({
    type: "POST",
    url: "valida_cantidad_stock_carro.php",
    data: {
      CodArticulo: CodArticulo,
      Cantidad: Qty,
      Modo: "suma"
    },
    dataType: "json",
    async: false,
    success: function(result) {
      if (result.msg == "Ok") {

        PackWeb = result.PackWeb;

        datos = {
          CodArticulo: CodArticulo,
          NombreArticulo: NombreArticulo,
          PrecioVenta: PrecioVenta,
          PrecioSugerido: PrecioSugerido,
          PrecioSocio: PrecioSocio,
          Impuesto: Impuesto,
          AfectoFlete: AfectoFlete,
          Cantidad: Qty,
          RutaImagen: RutaImagen,
          Destacado: Destacado,
          PackWeb: PackWeb
        };


        $.ajax({
          type: "POST",
          url: "agrega_carro.php",
          data: datos,
          dataType: "json",
          async: false,
          success: function(result) {
            if (result.msg == "Ok") {
              menuCart();
              $("#cartCount").html(result.total_productos);
              $("#cartCountMobile").html(result.total_productos);
              swal({
                html: true,
                text: '¡Producto exitosamente agregado al carro!',
                icon: "success",
                timer: 2000,
                showConfirmButton: false,
                buttons: false
              });
            } else {
              swal({
                html: true,
                text: result.Obs,
                icon: "warning",
                timer: 2000,
                showConfirmButton: false,
                buttons: false
              });
            }
          }
        });

      } else {
        swal({
          html: true,
          text: result.Obs,
          icon: "warning",
          timer: 2000,
          showConfirmButton: false,
          buttons: false
        });
      }
    }
  });

}

function agregaCarroDetalle(CodArticulo, NombreArticulo, PrecioVenta, PrecioSugerido, PrecioSocio, Impuesto,
  AfectoFlete, RutaImagen, Destacado) {

  var Qty = $("#qty_detail_" + CodArticulo + "").val();

  datos = {
    CodArticulo: CodArticulo,
    NombreArticulo: NombreArticulo,
    PrecioVenta: PrecioVenta,
    PrecioSugerido: PrecioSugerido,
    PrecioSocio: PrecioSocio,
    Impuesto: Impuesto,
    AfectoFlete: AfectoFlete,
    Cantidad: Qty,
    RutaImagen: RutaImagen,
    Destacado: Destacado
  };

  $.ajax({
    type: "POST",
    url: "valida_cantidad_stock_carro.php",
    data: {
      CodArticulo: CodArticulo,
      Cantidad: Qty,
      Modo: "suma"
    },
    dataType: "json",
    async: false,
    success: function(result) {
      if (result.msg == "Ok") {

        $.ajax({
          type: "POST",
          url: "agrega_carro.php",
          data: datos,
          dataType: "json",
          async: false,
          success: function(result) {
            if (result.msg == "Ok") {
              menuCart();
              $("#cartCount").html(result.total_productos);
              $("#cartCountMobile").html(result.total_productos);
              swal({
                html: true,
                text: '¡Producto exitosamente agregado al carro!',
                icon: "success",
                timer: 2000,
                showConfirmButton: false,
                buttons: false
              });
            } else {
              swal({
                html: true,
                text: result.Obs,
                icon: "warning",
                timer: 2000,
                showConfirmButton: false,
                buttons: false
              });
            }
          }
        });

      } else {
        swal({
          html: true,
          text: result.Obs,
          icon: "warning",
          timer: 2000,
          showConfirmButton: false,
          buttons: false
        });
      }
    }
  });

}

function cambiaCantidades(i, IdProducto, CodArticulo, NombreArticulo, PrecioVenta, PrecioSugerido, Impuesto,
  AfectoFlete, RutaImagen, Destacado) {

  var Qty = $("#qty_" + i + "").val();

  datos = {
    IdProducto: IdProducto,
    CodArticulo: CodArticulo,
    NombreArticulo: NombreArticulo,
    PrecioVenta: PrecioVenta,
    PrecioSugerido: PrecioSugerido,
    Impuesto: Impuesto,
    AfectoFlete: AfectoFlete,
    Cantidad: Qty,
    RutaImagen: RutaImagen,
    Destacado: Destacado
  };

  $.blockUI({
    message: '<h4>Modificando Carrito...</h4>'
  });

  $.ajax({
    type: "POST",
    url: "valida_cantidad_stock_carro.php",
    data: {
      CodArticulo: CodArticulo,
      Cantidad: Qty,
      Modo: "cambio"
    },
    dataType: "json",
    success: function(result) {
      if (result.msg == "Ok") {

        $.ajax({
          type: "POST",
          url: "modifica_carro.php",
          data: datos,
          dataType: "json",
          success: function(result) {
            if (result.msg == "Ok") {

              cantidad_articulo = result.cantidad_articulo;

              if (cantidad_articulo != 0) {

                SubTotal = Math.round(cantidad_articulo * result
                  .precio_final);
                $("#subtotal_" + i + "").html("$" + number_format(
                    SubTotal, 0) +
                  "");

                menuCart();
                $("#cartCount").html(result.total_productos);
                $("#cartCountMobile").html(result
                  .total_productos);

              } else {

                $("#product_" + i + "").remove();

              }

              $.unblockUI();
              calculoTotales();

            } else {
              swal({
                html: true,
                text: result.Obs,
                icon: "warning",
                timer: 2000,
                showConfirmButton: false,
                buttons: false
              });
              $.unblockUI();
            }
          }
        });

      } else {
        swal({
          html: true,
          text: result.Obs,
          icon: "warning",
          timer: 2000,
          showConfirmButton: false,
          buttons: false
        });
        $("#qty_" + i + "").val(result.CantidadCarro);
        $.unblockUI();
      }
    }
  });


}

function cambiaCantidadesCarrito(i, IdProducto, CodArticulo, NombreArticulo, PrecioVenta, PrecioSugerido, Impuesto,
  AfectoFlete, RutaImagen, Destacado) {

  var Qty = $("#qty_" + i + "").val();

  datos = {
    IdProducto: IdProducto,
    CodArticulo: CodArticulo,
    NombreArticulo: NombreArticulo,
    PrecioVenta: PrecioVenta,
    PrecioSugerido: PrecioSugerido,
    Impuesto: Impuesto,
    AfectoFlete: AfectoFlete,
    Cantidad: Qty,
    RutaImagen: RutaImagen,
    Destacado: Destacado
  };

  $.blockUI({
    message: '<h4>Modificando Carrito...</h4>'
  });

  $.ajax({
    type: "POST",
    url: "valida_cantidad_stock_carro.php",
    data: {
      CodArticulo: CodArticulo,
      Cantidad: Qty,
      Modo: "cambio"
    },
    dataType: "json",
    success: function(result) {
      if (result.msg == "Ok") {

        $.ajax({
          type: "POST",
          url: "modifica_carro.php",
          data: datos,
          dataType: "json",
          success: function(result) {
            if (result.msg == "Ok") {

              cantidad_articulo = result.cantidad_articulo;

              if (cantidad_articulo != 0) {

                dataCarrito();

                SubTotal = Math.round(cantidad_articulo * result
                  .precio_final);
                $("#subtotal_" + i + "").html("$" + number_format(
                  SubTotal, 0) + "");

                menuCart();
                $("#cartCount").html(result.total_productos);
                $("#cartCountMobile").html(result
                  .total_productos);

              } else {

                $("#product_" + i + "").remove();

              }

              $.unblockUI();
              calculoTotales();

            } else {
              swal({
                html: true,
                text: result.Obs,
                icon: "warning",
                timer: 2000,
                showConfirmButton: false,
                buttons: false
              });
              $.unblockUI();
            }
          }
        });

      } else {
        swal({
          html: true,
          text: result.Obs,
          icon: "warning",
          timer: 2000,
          showConfirmButton: false,
          buttons: false
        });
        $("#qty_" + i + "").val(result.CantidadCarro);
        $.unblockUI();
      }
    }
  });


}

function dataCarrito() {

  $.ajax({
    type: "POST",
    url: "data_carrito.php",
    success: function(result) {
      $("#bodyCart").html(result);
    }
  });

}

function removeCart(id, location) {

  $.ajax({
    type: "POST",
    url: "remove_cart.php",
    data: {
      id: id
    },
    dataType: "json",
    success: function(result) {
      if (result.msg == "Ok") {
        swal({
          html: true,
          text: result.Obs,
          icon: "success",
          timer: 2000,
          showConfirmButton: false,
          buttons: false
        });

        if (result.total_productos == 0) {
          top.location.href = "index.php";
        } else {
          menuCart();
          $("#cartCount").html(result.total_productos);
          $("#cartCountMobile").html(result.total_productos);
        }
      } else {
        swal({
          html: true,
          text: result.Obs,
          icon: "warning",
          timer: 2000,
          showConfirmButton: false,
          buttons: false
        });
      }
    }
  });

}

menuCart();

function goCheckout() {
  location.href = "checkout.php";
}
$('.referidos').owlCarousel({
  autoPlay: true,
  navigation: false,
  slideSpeed: 300,
  paginationSpedd: 400,
  singleItem: true,
  transitionStyle: "fade"
});
$('.referidos_unicos').owlCarousel({
  navigation: false,
  slideSpeed: 300,
  paginationSpedd: 400,
  singleItem: true,
  pagination: false
});
$('.revistas').owlCarousel({
  autoPlay: true,
  navigation: false,
  slideSpeed: 300,
  paginationSpedd: 400,
  singleItem: false,
  items: 4
});
$('.reportajes').owlCarousel({
  autoPlay: true,
  navigation: false,
  slideSpeed: 300,
  paginationSpedd: 400,
  singleItem: false,
  items: 4
});
</script>